CMAKE_MINIMUM_REQUIRED(VERSION 3.10.3)

SET(SRC_DIR ${CONCRETE_PROJECT_ROOT_DIRECTORY}/src)

SET(HDC_SORUCES_HEADERS
    ${SRC_DIR}/include/SMBIOSType.h
    ${SRC_DIR}/include/SMBIOSTable.h
    ${SRC_DIR}/common/CPUID.h
)

SET(HDC_SORUCES_FILES
    ${SRC_DIR}/common/CPUID.c
)

IF (MSVC)
    SET (HDC_PLATFORM_INCLUDES
        ${SRC_DIR}/windows/ComPtr.h
    )

    SET (HDC_PLATFORM_SOURCES
        ${SRC_DIR}/windows/SMBIOSTable.c
    )
ENDIF(MSVC)

CONCRETE_METHOD_ADD_TARGET(
    TARGET_NAME 
        libhdc
    TYPE        
        "Static"
    SOURCES
        ${HDC_SORUCES_HEADERS}
        ${HDC_SORUCES_FILES}
        ${HDC_PLATFORM_INCLUDES}
        ${HDC_PLATFORM_SOURCES}
    INCLUDE_DIRECTORIES
        PRIVATE
            ${SRC_DIR}/windows
            ${SRC_DIR}/common
        PUBLIC
            ${SRC_DIR}/include
)
# CONCRETE_ADD_PROJECT(
#     NAME libhdc
#     TYPE "Static"
#     INCLUDE_FILES ${HDC_SORUCES_HEADERS} ${HDC_PLATFORM_INCLUDES}
#     SOURCE_FILES  ${HDC_SORUCES_FILES} ${HDC_PLATFORM_SOURCES}
#     INCLUDE_DIRECTORIES  ${CONCRETE_PROJECT_SOURCE_DIR}/${HDC_SORUCE_DIR}/windows ${CONCRETE_PROJECT_SOURCE_DIR}/${HDC_SORUCE_DIR}/include ${CONCRETE_PROJECT_SOURCE_DIR}/${HDC_SORUCE_DIR}/common
# )